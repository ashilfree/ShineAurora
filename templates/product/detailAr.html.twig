{% extends 'baseAr.html.twig' %}

{% block body %}

    <!-- Begin Hiraola's Breadcrumb Area -->
    <div class="breadcrumb-area"  style="background-image: url({{ vich_uploader_asset(banner, 'imageFile') | imagine_filter('Extra_large') }});background-repeat:no-repeat;background-position:center;">
        <div class="container">
{#            <div class="breadcrumb-content">#}
{#                <h2>{{ product.nameAr }}</h2>#}
{#                <ul>#}
{#                    <li><a href="{{ path('home', { locale: 'ar' }) }}">الصفحة الرئيسية</a></li>#}
{#                    <li class="active">{{ product.nameAr }}</li>#}
{#                </ul>#}
{#            </div>#}
        </div>
    </div>
    <!-- Hiraola's Breadcrumb Area End Here -->
    <div style="padding-top: 60px">
        <div class="container">
            <div>
                <ul>
                    <li class="text-center" style="color: #595959;font-size: 25px;"><a href="{{ path('home', { locale: 'ar' }) }}">الصفحة الرئيسية</a> / {{ product.nameAr }}</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Begin Hiraola's Single Product Variable Area -->
    <div class="sp-area">
        <div class="container">
            <div class="sp-nav">
                <div class="row">
                    <div class="col-lg-5 col-md-5">
{#                        <div class="sp-img_area">#}
{#                            <div class="sp-img_slider-2 slick-img-slider hiraola-slick-slider arrow-type-two" data-slick-options='{#}
{#                                                        "slidesToShow": 1,#}
{#                                                        "arrows": false,#}
{#                                                        "fade": true,#}
{#                                                        "draggable": false,#}
{#                                                        "swipe": false,#}
{#                                                        "asNavFor": ".sp-img_slider-nav"#}
{#                                                        }'>#}
{#                                {% for image in product.images %}#}
{#                                    <div class="single-slide red">#}
{#                                        #}{#                                    <img src="{{ vich_uploader_asset(image, 'imageFile') }}" class="light-zoom" alt="Shine Aurora Product Image">#}
{#                                        <img id="zoomit-target" src="{{ vich_uploader_asset(image, 'imageFile') }}" data-zoomed="{{ vich_uploader_asset(image, 'imageFile') }}" alt="Shine Aurora Product Image">#}
{#                                    </div>#}
{#                                {% endfor %}#}
{#                            </div>#}
{#                            <div class="sp-img_slider-nav slick-slider-nav hiraola-slick-slider arrow-type-two" data-slick-options='{#}
{#                                                        "slidesToShow": 3,#}
{#                                                        "asNavFor": ".sp-img_slider-2",#}
{#                                                        "focusOnSelect": true#}
{#                                                        }'>#}
{#                                {% for image in product.images %}#}
{#                                    <div class="single-slide red">#}
{#                                        <img src="{{ vich_uploader_asset(image, 'imageFile') }}" alt="Shine Aurora Product Thumnail">#}
{#                                    </div>#}
{#                                {% endfor %}#}
{#                            </div>#}
{#                        </div>#}
                        <img id="image" class="xzoom" src="{{ vich_uploader_asset(product.images.first, 'imageFile') }}" xoriginal="{{ vich_uploader_asset(product.images.first, 'imageFile') }}" />
                        <video id="video" width="100%" height="auto" controls style="display: none">
                            <source src="{{ '/media/video/' ~ product.video }}" type="video/mp4">
                        </video>
                        <div class="xzoom-thumbs">
                            {% for image in product.images %}
                                <a href="{{ vich_uploader_asset(image, 'imageFile') }}">
                                    <img class="xzoom-gallery" width="80" src="{{ vich_uploader_asset(image, 'imageFile') }}" {% if loop.index == 1 %} xpreview="{{ vich_uploader_asset(image, 'imageFile') }}" {% endif %}>
                                </a>
                            {% endfor %}
                            {% if product.video %}
                                <a>
                                    <img class="xzoom-gallery" width="80" src="{{ '/media/images/film-and-vid.jpg' }}">
                                </a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-7 col-md-7">
                        <div class="sp-content text-right">
                            <div class="sp-heading">
                                <h5><a href="#">{{ product.nameAr|upper }}</a></h5>
                            </div>
                            <span class="reference">مرجع: {{ product.category.nameAr }}</span>
                            {#                            <div class="rating-box">#}
                            {#                                <ul>#}
                            {#                                    <li><i class="fa fa-star-of-david"></i></li>#}
                            {#                                    <li><i class="fa fa-star-of-david"></i></li>#}
                            {#                                    <li><i class="fa fa-star-of-david"></i></li>#}
                            {#                                    <li><i class="fa fa-star-of-david"></i></li>#}
                            {#                                    <li class="silver-color"><i class="fa fa-star-of-david"></i></li>#}
                            {#                                </ul>#}
                            {#                            </div>#}
                            <div class="sp-essential_stuff">
                                <ul>
                                    <li>نوع القماش: <a href="javascript:void(0)">{{ product.fabricType }}</a></li>
                                </ul>
                            </div>
                            <div class="sp-essential_stuff">
                                <ul>
                                    <li>حالة المنتج: <a href="javascript:void(0)">{{ product.inStockAr }}</a></li>
                                </ul>
                            </div>
                            <div class="price-list_area">
                                <div class="price-box style-1">
                                    {% if product.discountPrice != 0 %}
                                        <del><span class="new-price">{{ (product.price / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></del>
                                        <ins><span class="new-price">{{ (product.discountPrice / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></ins>
                                    {% else %}
                                        <ins><span class="new-price">{{ (product.price / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></ins>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="essential_stuff">
                                <ul>
                                    <li id="description">
                                        {{ product.descriptionAr }}
                                    </li>
                                </ul>
                            </div>
                            <div class="product-size_box">
                                <span>المقاس</span>
                                <select class="myniceselect nice-select">
                                    {% for key,value in sizesName %}
                                        <option data-color="" value="{{ key }}">{{ value }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="color-list_area">
                                <div class="color-list_heading">
                                    <h4>الخيارات المتاحة</h4>
                                </div>
                                <span class="sub-title">اللون</span>
                                <div class="color-list">
                                    {% for catalog in product.catalogs %}
                                        {% if catalog.quantity > 0 %}
                                            <a href="javascript:void(0)" class="single-color {{ catalog.size.id }} {% if loop.index != 1 %} opacity {% endif %}" data-swatch-color="red">
                                                <span  data-quantity="{{ catalog.quantity }}" data-id="{{ catalog.id }}" style="background-color: {{ catalog.color }};display: block"></span>
                                                {#                                            <span class="color-text">Red (+£3.61)</span>#}
                                            </a>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="quantity">
                                <label>كمية</label>
                                <div class="cart-plus-minus">
                                    <input class="cart-plus-minus-box" value="1" type="number" disabled>
                                    <div class="dec qtybutton"><i class="fa fa-angle-down"></i></div>
                                    <div class="inc qtybutton"><i class="fa fa-angle-up"></i></div>
                                </div>
                            </div>
                            <div class="qty-btn_area">
                                <ul>
                                    <li><a class="qty-cart_btn" href="{{ path('add.cart', { locale: 'ar' }) }}">أضف إلى العربة</a></li>
                                    <li><a class="qty-wishlist_btn" {% if wish[product.id] is defined and wish[product.id] == 1  %} href="{{ path('delete.wishlist', { locale: 'ar', id:product.id, route:page }) }}" title="Remove from Wishlist" {% else %} href="{{ path('add.wishlist', { locale: 'ar', id:product.id }) }}" title="Add To Wishlist" {% endif %} data-toggle="tooltip" data-placement="top"><i {% if wish[product.id] is defined and wish[product.id] == 1  %} class="ion-android-favorite"  {% else %} class="ion-android-favorite-outline"  {% endif %} ></i></a></li>
                                    {#                                    <li><a class="qty-compare_btn" href="compare.html" data-toggle="tooltip" title="Compare This Product"><i class="ion-ios-shuffle-strong"></i></a></li>#}
                                </ul>
                            </div>
{#                            <div class="hiraola-tag-line">#}
{#                                <h6>العلامات:</h6>#}
{#                                {% for tag in product.togs %}#}
{#                                    <a href="javascript:void(0)">{{ tag }}</a>,#}
{#                                {% endfor %}#}
{#                            </div>#}
                            {#                            <div class="hiraola-social_link">#}
                            {#                                <ul>#}
                            {#                                    <li class="facebook">#}
                            {#                                        <a href="https://www.facebook.com" data-toggle="tooltip" target="_blank" title="Facebook">#}
                            {#                                            <i class="fab fa-facebook"></i>#}
                            {#                                        </a>#}
                            {#                                    </li>#}
                            {#                                    <li class="twitter">#}
                            {#                                        <a href="https://twitter.com" data-toggle="tooltip" target="_blank" title="Twitter">#}
                            {#                                            <i class="fab fa-twitter-square"></i>#}
                            {#                                        </a>#}
                            {#                                    </li>#}
                            {#                                    <li class="youtube">#}
                            {#                                        <a href="https://www.youtube.com" data-toggle="tooltip" target="_blank" title="Youtube">#}
                            {#                                            <i class="fab fa-youtube"></i>#}
                            {#                                        </a>#}
                            {#                                    </li>#}
                            {#                                    <li class="google-plus">#}
                            {#                                        <a href="https://www.plus.google.com/discover" data-toggle="tooltip" target="_blank" title="Google Plus">#}
                            {#                                            <i class="fab fa-google-plus"></i>#}
                            {#                                        </a>#}
                            {#                                    </li>#}
                            {#                                    <li class="instagram">#}
                            {#                                        <a href="https://rss.com" data-toggle="tooltip" target="_blank" title="Instagram">#}
                            {#                                            <i class="fab fa-instagram"></i>#}
                            {#                                        </a>#}
                            {#                                    </li>#}
                            {#                                </ul>#}
                            {#                            </div>#}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hiraola's Single Product Variable Area End Here -->

    <!-- Begin Hiraola's Single Product Tab Area -->
    <div class="hiraola-product-tab_area-2 sp-product-tab_area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="sp-product-tab_nav ">
                        <div class="product-tab">
                            <ul class="nav product-menu">
                                <li><a class="active" data-toggle="tab" href="#descrip"><span>وصف</span></a>
                                </li>
                                <li><a data-toggle="tab" href="#size"><span>دليل المقاسات</span></a></li>
                            </ul>
                        </div>
                        <div class="tab-content hiraola-tab_content">
                            <div id="descrip" class="tab-pane active show" role="tabpanel">
                                <div class="product-description text-right">
                                    {{ product.longDescriptionAr|raw }}
                                </div>
                            </div>
                            <div id="size" class="tab-pane" role="tabpanel">
                                {#                                <a href="#img">#}
                                {#                                    <img class="thumb" src="{{ vich_uploader_asset(product, 'imageFile') }}">#}
                                {#                                </a>#}
                                {#                                <!-- third image box webdevtrick.com -->#}
                                {#                                <div class="lightbox" id="img">#}

                                {#                                    <a href="#_" class="btn-close">X</a>#}
                                {#                                    <img src="{{ vich_uploader_asset(product, 'imageFile') }}">#}
                                {#                                </div>#}
                                <div class="row d-flex flex-wrap align-items-center" data-toggle="modal" data-target="#lightbox">
                                    <div class="col-12 col-md-8 col-lg-6 offset-md-2 offset-lg-3">
                                        <img src="{{ vich_uploader_asset(product, 'imageFile') }}" data-target="#indicators" data-slide-to="0" alt="" />
                                    </div>
                                </div>

                                <!-- Modal -->
                                <div class="modal fade" id="lightbox" role="dialog" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <button type="button" class="close text-right p-2" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                            <div id="indicators" class="carousel slide" data-interval="false">
                                                <ol class="carousel-indicators">
                                                    <li data-target="#indicators" data-slide-to="0" class="active"></li>
                                                </ol>
                                                <div class="carousel-inner">

                                                    <div class="carousel-item active">
                                                        <img class="d-block w-400" src="{{ vich_uploader_asset(product, 'imageFile') }}" alt="First slide">
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hiraola's Single Product Tab Area End Here -->

    <!-- Begin Hiraola's Product Area Two -->
    <div class="hiraola-product_area hiraola-product_area-2 section-space_add">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">

                    <div class="hiraola-section_title text-right">
                        <h4>منتجات ذات صله</h4>
                    </div>

                </div>
                <div class="col-lg-12">
                    {% set prod = product %}
                    <div class="hiraola-product_slider-3">
                        {% set break = false %}
                        {% for product in products %}
                            {% if not break %}
                            {% if loop.index <= 4 %}
                            {% if product != prod %}
                                <!-- Begin Hiraola's Slide Item Area -->
                                <div class="slide-item">
                                    <div class="single_product">
                                        <div class="product-img">
                                            <a href="{{ path('product', {locale: 'ar', 'slug': product.slug }) }}">
                                                <img class="primary-img" src="{{ vich_uploader_asset(product.images.first, 'imageFile') | imagine_filter('medium') }}" alt="{{ product.name }}">
                                                <img class="secondary-img" src="{{ vich_uploader_asset(product.images.first, 'imageFile') | imagine_filter('medium') }}" alt="{{ product.name }}">
                                            </a>
                                            {#                                    <span class="sticker-2">Sale</span>#}
                                            <div class="add-actions">
                                                <ul>
                                                    {% set break = false %}
                                                    <li><a class="hiraola-add_cart"
                                                                {% for catalog in product.catalogs %}
                                                                    {% if not break %}
                                                                        {% if catalog.quantity > 0 %}
                                                                            href="{{ path('add.cart', { locale: 'ar', id: catalog.id }) }}"
{#                                                                            {% set break = true %}#}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endfor %}
                                                           data-toggle="tooltip" data-placement="top" title="أضف إلى السلة"><i class="ion-bag"></i></a></li>
                                                    <li class="quick-view-btn" data-toggle="modal" data-target="#exampleModalCenter">
                                                        <a class="js-show-modal1" href="javascript:void(0)" data-toggle="tooltip" data-placement="top" title="نظرة سريعة"
                                                           data-id="{{ product.id }}"
                                                           data-name="{{ product.nameAr }}"
                                                           data-slug="{{ path('product', {locale: 'ar', 'slug': product.slug }) }}"
                                                           data-description="{{ product.descriptionAr|raw }}"
                                                           data-price="{{ (product.price / 100) |number_format(2, '.', ',') }} {{ currency_ar }}"
                                                           data-discount="{{ (product.discountPrice / 100) |number_format(2, '.', ',') }} {{ currency_ar }}"
                                                                {% for catalog in  product.catalogs %} data-catalog{{ loop.index }}="{{ catalog.id }}" {% endfor %}
                                                                {% for catalog in  product.catalogs %} data-size{{ loop.index }}="{{ catalog.size }}" {% endfor %}
                                                                {% for catalog in  product.catalogs %} data-color{{ loop.index }}="{{ catalog.color }}" {% endfor %}
{#                                                                {% for tag in  product.togs %} data-tag{{ loop.index }}="{{ tag }}" {% endfor %}#}
                                                                {% for image in  product.images %} data-image{{ loop.index }}="{{ image }}" {% endfor %}
                                                           data-href-a ="{{ path('add.cart', { locale: 'ar' }) }}"
                                                        >
                                                            <i class="ion-eye"></i>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="hiraola-product_content">
                                            <div class="product-desc_info row">
                                                <div class="col-10">
                                                <h6><a class="product-name" href="{{ path('product', {locale: 'ar', 'slug': product.slug }) }}">{{ product.nameAr }}</a></h6>
                                                <div class="price-box style-1">
                                            <span class="new-price">
                                                          {% if product.discountPrice != 0 %}
                                                              <del><span class="new-price">{{ (product.price / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></del>
                                                              <ins><span class="new-price">{{ (product.discountPrice / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></ins>
                                                {% else %}
                                                              <ins><span class="new-price">{{ (product.price / 100) |number_format(2, '.', ',') }} {{ currency_ar }}</span></ins>
                                                          {% endif %}
                                            </span>
                                                </div>
                                                </div>
                                                <div class="col-2 additional-add_action">
                                                    <ul>
                                                        <li><a class="hiraola-add_compare"{% if wish[product.id] is defined and wish[product.id] == 1  %} href="{{ path('delete.wishlist', { locale: 'ar', id:product.id, route:page }) }}" title="Remove from Wishlist" {% else %} href="{{ path('add.wishlist', { locale: 'ar', id:product.id }) }}" title="Add To Wishlist" {% endif %} data-toggle="tooltip" data-placement="top" >
                                                                <i {% if wish[product.id] is defined and wish[product.id] == 1  %} class="ion-android-favorite"  {% else %} class="ion-android-favorite-outline"  {% endif %} ></i></a>
                                                        </li>
                                                        {% if product.video %}
                                                            <li>
                                                                <i class="ion-ios-videocam"></i>
                                                            </li>
                                                        {% endif %}
                                                    </ul>
                                                </div>
                                                {#                                        <div class="rating-box">#}
                                                {#                                            <ul>#}
                                                {#                                                <li><i class="fa fa-star-of-david"></i></li>#}
                                                {#                                                <li><i class="fa fa-star-of-david"></i></li>#}
                                                {#                                                <li><i class="fa fa-star-of-david"></i></li>#}
                                                {#                                                <li><i class="fa fa-star-of-david"></i></li>#}
                                                {#                                                <li class="silver-color"><i class="fa fa-star-of-david"></i></li>#}
                                                {#                                            </ul>#}
                                                {#                                        </div>#}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Hiraola's Slide Item Area End Here -->
                            {% endif %}
                            {% endif %}
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hiraola's Product Area Two End Here -->

    <!-- Modal1 -->
    {% include 'modal2.html.twig' %}

    <style>
        .sold_out {
            top: 2em;
            left: -4em;
            color: #fff;
            display: block;
            position:absolute;
            text-align: center;
            text-decoration: none;
            letter-spacing: .06em;
            background-color: #A00;
            padding: 0.5em 5em 0.4em 5em;
            text-shadow: 0 0 0.75em #444;
            box-shadow: 0 0 0.5em rgba(0,0,0,0.5);
            font: bold 16px/1.2em Arial, Sans-Serif;
            -webkit-text-shadow: 0 0 0.75em #444;
            -webkit-box-shadow: 0 0 0.5em rgba(0,0,0,0.5);
            -webkit-transform: rotate(-45deg) scale(0.75,1);
            z-index:10;
        }
        .sold_out:before {
            content: '';
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            position: absolute;
            margin: -0.3em -5em;
            transform: scale(0.7);
            -webkit-transform: scale(0.7);
            border: 2px rgba(255,255,255,0.7) dashed;
        }
        .thumb {
            max-height: 171px;
            border: solid 6px white;
        }
        .lightbox {
            position: fixed;
            z-index: 999;
            height: 0;
            width: 0;
            text-align: center;
            top: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.8);
            opacity: 0;
        }
        .lightbox img {
            max-width: 90%;
            max-height: 80%;
            margin-top: 2%;
            opacity: 0;
        }
        .lightbox:target {
            outline: none;

            width: 100%;
            height: 100%;
            opacity: 1 !important;

        }
        .lightbox:target img {
            border: solid 17px white;
            opacity: 1;
            webkit-transition: opacity 0.6s;
            transition: opacity 0.6s;
        }
        .light-btn {
            color: #fafafa;
            background-color: #333;
            border: solid 3px white;
            padding: 5px 15px;
            border-radius: 1px;
            text-decoration: none;
            cursor: pointer;
            vertical-align: middle;
            position: absolute;
            top: 45%;
            z-index: 99;
        }
        .light-btn:hover {
            background-color: #111;
        }
        .btn-close {
            position: absolute;
            right: 2%;
            top: 2%;
            color: #fafafa;
            background-color: red;
            border: solid 5px white;
            padding: 10px 15px;
            border-radius: 1px;
            text-decoration: none;
        }
        .btn-close:hover {
            background-color: #740404;
        }
        .modal-dialog{
            max-width: 800px;
        }
    </style>
    <script>
        function check_status(obj) {
            var quantity = obj.options[obj.selectedIndex].getAttribute('data-quantity');
            if(quantity === '0'){
                document.querySelector('.sold_out').style.display = 'block';
            }else{
                document.querySelector('.sold_out').style.display = 'none';
            }
        }
    </script>
    <script>

        document.querySelectorAll('.xzoom-thumbs a').forEach(a =>{
            a.addEventListener('click', e => {
                if(a.getAttribute("href")){
                    setTimeout(function() { document.querySelector('.xzoom').style.display = 'block'; }, 10);

                    document.querySelector('#video').style.display = 'none';
                }else{

                    document.querySelector('#video').style.display = 'block';
                    setTimeout(function() { document.querySelector('.xzoom').style.display = 'none'; }, 10);
                }
            })
        } )
    </script>
{% endblock %}