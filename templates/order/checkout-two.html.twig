{% extends 'base.html.twig' %}
{#{% block javascript %}#}
{#    <script src="https://js.stripe.com/v3/"></script>#}
{#{% endblock %}#}

{% block stylesheets %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
{% endblock %}
{% block body %}
{% set total = null %}
{#{% set isTrue = false %}#}
    {% for orderDetail in cart2order %}
     {% if orderDetail.catalog.product.discountPrice != 0 %}
        {% set subTotal = ((orderDetail.quantity * orderDetail.catalog.product.discountPrice)) %}
        {% else %}
        {% set subTotal = ((orderDetail.quantity * orderDetail.catalog.product.price)) %}
        {% endif %}
{#        {% if subTotal < 50 %}#}
{#            {% set isTrue = true %}#}
{#        {% endif %}#}
        {% set total = total + subTotal %}
    {% endfor %}
    <!-- Begin Hiraola's Breadcrumb Area -->
    <div class="breadcrumb-area" style="background-image: url({{ vich_uploader_asset(banner, 'imageFile') | imagine_filter('Extra_large') }});background-repeat:no-repeat;background-position:center;">
        <div class="container">
{#            <div class="breadcrumb-content">#}
{#                <h2>Order</h2>#}
{#                <ul>#}
{#                    <li><a href="{{ path('home', { locale: 'en' }) }}">Home</a></li>#}
{#                    <li class="active">Checkout</li>#}
{#                </ul>#}
{#            </div>#}
        </div>
    </div>
    <!-- Hiraola's Breadcrumb Area End Here -->
    <div style="padding-top: 60px">
        <div class="container">
            <div>
                <ul>
                    <li class="text-center" style="color: #595959;font-size: 25px;"><a href="{{ path('home', { locale: 'en' }) }}">Home</a> / Checkout</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Begin Hiraola's Checkout Area -->
    <div class="checkout-area js-checkout">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-12">
                    <div class="your-order">
                        <div class="details_item">
                            <h3>Order Info</h3>
                            <table class="table">
                                <tbody>
                                <tr>
                                    <td class="cart-product-name">Order number :</td>
                                    <td class="cart-product-total">{{ order.reference }}</td>
                                </tr>
                                <tr>
                                    <td class="cart-product-name">Date :</td>
                                    <td class="cart-product-total">{{ order.createdAt|date("m/d/Y") }}</td>
                                </tr>
                                <tr>
                                    <td class="cart-product-name">Total :</td>
                                    <td class="cart-product-total">{{ (total + order.deliveryPrice)/100|number_format(2, '.', ',') ~ currency }}</td>
                                </tr>
                                <tr>
                                    <td class="cart-product-name">Shipping Price :</td>
                                    <td class="cart-product-total">{{ order.deliveryPrice/100|number_format(2, '.', ',') ~ currency }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="details_item">
                            <h3>Billing Info</h3>
                            <table class="table">
                                <tbody>
                                <tr>
                                    <td class="cart-product-name">Name :</td>
                                    <td class="cart-product-total">{{ order.shippingFullName }}</td>
                                </tr>
                                <tr>
                                    <td class="cart-product-name">Email :</td>
                                    <td class="cart-product-total">{{ order.shippingEmail }}</td>
                                </tr>
                                <tr>
                                    <td class="cart-product-name">Phone :</td>
                                    <td class="cart-product-total">{{ order.shippingPhone }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="details_item">
                            <h3>Billing Address</h3>
                            <table class="table">
                                <tbody>
                                <tr>
                                    <td class="cart-product-name">Address :</td>
                                    <td class="cart-product-total">{{ order.shippingAddress }}</td>
                                </tr>
{#                                <tr>#}
{#                                    <td class="cart-product-name">City :</td>#}
{#                                    <td class="cart-product-total">{{ order.shippingCity }}</td>#}
{#                                </tr>#}
{#                                <tr>#}
{#                                    <td class="cart-product-name">Governorate :</td>#}
{#                                    <td class="cart-product-total">{{ order.shippingProvince }}</td>#}
{#                                </tr>#}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-12">
                    <div class="your-order">
                        <h3>Your order</h3>
                        <div class="your-order-table table-responsive">
                            {% set total = null %}
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="cart-product-name">Product</th>
                                    <th class="cart-product-total">Total</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for productCart in cart2order %}
                                    <tr class="cart_item">
                                        <td class="cart-product-name"> {{ productCart.catalog.product.name }}<strong class="product-quantity">
                                                × {{ productCart.quantity }}</strong></td>
                                        <td class="cart-product-total"><span class="amount">
                                             {% if productCart.catalog.product.discountPrice != 0 %}
                                                 {{ (productCart.quantity * productCart.catalog.product.discountPrice/100) |number_format(2, '.', ',')~ currency }}
                                             {% else %}
                                                 {{ (productCart.quantity * productCart.catalog.product.price/100) |number_format(2, '.', ',')~ currency }}
                                             {% endif %}
                                    </span></td>
                                    </tr>
                                    {% if productCart.catalog.product.discountPrice != 0 %}
                                        {% set total = total + ((productCart.quantity * productCart.catalog.product.discountPrice)/100) %}
                                    {% else %}
                                        {% set total = total + ((productCart.quantity * productCart.catalog.product.price)/100) %}
                                    {% endif %}
                                {% endfor %}
                                </tbody>
                                <tfoot>
                                <tr class="cart-subtotal">
                                    <th>Cart Subtotal</th>
                                    <td><span class="amount">{{ total |number_format(2, '.', ',')  ~currency }}</span></td>
                                </tr>
                                <tr class="cart-delivery">
                                    <th>delivery fees</th>
                                    <td><span class="amount">{{ (order.deliveryPrice/100) |number_format(2, '.', ',') ~ currency }}</span></td>
                                </tr>
                                <tr class="order-total">
                                    <th>Order Total</th>
                                    <td><strong><span class="amount">{{ (total + (order.deliveryPrice/100)) |number_format(2, '.', ',') ~ currency }}</span></strong></td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                        <h3>Payment Method</h3>
                        <div class="payment-method">
                            <div class="payment-accordion">
                                    {{ form_start(payment_method_form, {action: path('my.fatoorah.create.session', { id: order.id , locale: 'en' }), 'attr': {'onsubmit': 'setFormSubmitting()'}}) }}
                                    <div class="p-t-15 p-all-30">
                                        <div class="payment-type">

                                            <div class="types flex justify-space-between">
                                                <div class="type type2 selected">
                                                    <div class="logo">
                                                        <i class="far fa-credit-card"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Pay with Credit Card</p>
                                                    </div>
                                                </div>
                                                <div class="type type1 disabled ">
                                                    <div class="logo">
                                                        <i class="fas fa-handshake"></i>
                                                    </div>
                                                    <div class="text">
                                                        <p>Pay on Delivery</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="select-wrapper m-b-15 m-t-15">

                                            {#                            <select class="nice-select" name="payment" required="required">#}
                                            {#                                <option value="">Select a payment method...</option>#}
                                            {#                                {% for paymentMethod in paymentMethods %}#}
                                            {#                                    <option#}

                                            {#                                            value="{{ paymentMethod.id }}">{{ paymentMethod.name }}</option>#}
                                            {#                                {% endfor %}#}
                                            {#                            </select>#}
                                            {#                            <div class="dropDownSelect2"></div>#}

                                            {{ form_widget(payment_method_form.paymentMethod, {'attr': {'class': 'nice-select wide', 'placeholder':'Choose a Credit Card *', 'required': 'true'}}) }}
                                        </div>

                                    </div>
                                    {{ form_row(payment_method_form._token) }}
                                <main>
                                    <article class="terms-and-conditions">
                                        <h1>Terms and Conditions</h1>
                                        <h2>Introduction</h2><div>Welcome to the shineaurora.com website (the "Site"). These terms and conditions ("Terms and Conditions") apply to the Site to all of its divisions, subsidiaries, and affiliate operated Internet sites which reference these Terms and Conditions.</div><div><br>By accessing the Site, you confirm your understanding of the Terms and Conditions, and you agree to be bound by these Terms and Conditions. If you do not agree to these Terms and Conditions of use, you shall not use this website. The Site reserves the right, to change, modify, add, or remove portions of these Terms and Conditions of use at any time. Changes will be effective when posted on the Site with no other notice provided. Please check these Terms and Conditions of use regularly for updates. Your continued use of the Site following the posting of changes to these Terms and Conditions of use constitutes your acceptance of those changes.<br><br><br></div><h2>Use of the Site</h2><div>You are either at least 18 years of age or are accessing the Site under the supervision of a parent or legal guardian.</div><div><br>We grant you a non-transferable and revocable license to use the Site, under the Terms and Conditions described, for the purpose of shopping for personal items sold on the Site. Commercial use or use on behalf of any third party is prohibited, except as explicitly permitted by us in advance. Any breach of these Terms and Conditions shall result in the immediate revocation of the license granted in this paragraph without notice to you.</div><div><br>Content provided on this site is solely for informational purposes.&nbsp;</div><div><br>Certain services and related features that may be made available on the Site may require registration or subscription. Should you choose to register or subscribe for any such services or related features, you agree to provide accurate and current information about yourself, and to promptly update such information if there are any changes. Every user of the Site is solely responsible for keeping passwords and other account identifiers safe and secure. The account owner is entirely responsible for all activities that occur under such password or account. Furthermore, you must notify us of any unauthorized use of your password or account. The Site shall not be responsible or liable, directly or indirectly, in any way for any loss or damage of any kind incurred as a result of, or in connection with, your failure to comply with this section.</div><div><br>During the registration process you agree to receive promotional emails from the Site. You can subsequently opt out of receiving such promotional e-mails by clicking on the link at the bottom of any promotional email.<br><br><br></div><h2>Order Of Acceptance and Pricing</h2><div>Please note that there are cases when an order cannot be processed for various reasons. The Site reserves the right to refuse or cancel any order for any reason at any given time. You may be asked to provide additional verifications or information, including but not limited to phone number and address, before we accept the order.<br><br><br></div><h2>The Site May Not be Used to Order Items in Bulk for Resale</h2><div>We are determined to provide the most accurate pricing information on the Site to our users; however, errors may still occur, such as cases when the price of an item is not displayed correctly on the website. As such, we reserve the right to refuse or cancel any order. In the event that an item is mispriced, we may, at our own discretion, either contact you for instructions or cancel your order and notify you of such cancellation. We shall have the right to refuse or cancel any such orders whether or not the order has been confirmed and your credit card charged.</div><div><br><br></div><h2>Applicable Law and Jurisdiction</h2><div>These Terms and Conditions shall be interpreted and governed by the laws in force in kuwait, Subject to the Arbitration section below, each party hereby agrees to submit to the jurisdiction of the courts of kuwait and to waive any objections based upon venue.<br><br><br></div><h2>Applicable Law and Jurisdiction</h2><div>These Terms and Conditions shall be interpreted and governed by the laws in force in kuwait , Subject to the Arbitration section below, each party hereby agrees to submit to the jurisdiction of the courts of kuwait and to waive any objections based upon venue.<br><br><br></div><h2>Arbitration</h2><div>The arbitrator shall be a person who is legally trained and who has experience in the information technology field in kuwait and is independent of either party. Notwithstanding the foregoing, the Site reserves the right to pursue the protection of intellectual property rights and confidential information through injunctive or other equitable relief through the courts.<br><br><br></div><h2>Termination</h2><div>In addition to any other legal or equitable remedies, we may, without prior notice to you, immediately terminate the Terms and Conditions or revoke any or all of your rights granted under the Terms and Conditions. Upon any termination of this Agreement, you shall immediately cease all access to and use of the Site and we shall, in addition to any other legal or equitable remedies, immediately revoke all password(s) and account identification issued to you and deny your access to and use of this Site in whole or in part. Any termination of this agreement shall not affect the respective rights and obligations (including without limitation, payment obligations) of the parties arising before the date of termination. You furthermore agree that the Site shall not be liable to you or to any other person as a result of any such suspension or termination. If you are dissatisfied with the Site or with any terms, conditions, rules, policies, guidelines, or practices of shineaurora.com in operating the Site, your sole and exclusive remedy is to discontinue using the Site.</div><div><br></div>
                                        <h1>PRIVACY POLICY</h1>
                                        <div><strong>Privacy Policy</strong></div><div>This privacy policy is applicable to all of shineaurora's customer facing platforms including shineaurora’s website, www. shineaurora.com . Any reference to “site” or “website” may also refer to platforms interchangeably.&nbsp;</div><div><br></div><div><br></div><div><strong>Privacy Policy Changes</strong></div><div>This Privacy Policy may be subject to change from time to time. The current version of this Privacy Policy is posted online by shineaurora.</div><div>You should check our Privacy Policy regularly. Your continued use of the shineaurora website,&nbsp; and services constitutes your agreement to this Privacy Policy, as amended from time to time.</div><div><br></div><div><br></div><div><strong>Your rights</strong></div><div>You have rights about your personal data:</div><div><br></div><div>1. You have the right to be informed of any personal data which we may hold or process about you</div><div>2. You have the right to request access to the personal data which we may hold or process about you</div><div>3. You have the right to require us to correct any inaccuracies in your data free of charge</div><div>4. You have the right to ask us to stop using your personal data for direct marketing purposes</div><div>5. You have the right to ask us to erase your personal data or restrict the processing of your personal data</div><div>6. You have the right to request us to transfer any personal data which we may hold to you or any other service provider of your choice.</div><div>7. You have the right to lodge a complaint with the supervisory authority.</div><div><br></div><div><strong>Consent</strong></div><div>I hereby confirm that I have read and understood this Privacy Policy. By submitting data to shineaurora or by my using of shineaurora website, or services, I voluntarily and expressly consent to shineaurora's collection, use, sharing, processing and retention of my data in the manner set out in this Privacy Policy.&nbsp;</div><div><br></div><div><br></div><div><strong>Security</strong></div><div>We have in place appropriate technical and security measures to prevent unauthorised or unlawful access to or accidental loss of or destruction or damage to your information. When we collect data through the Site, we collect your personal details on a secure server. . Whilst we are unable to guarantee 100% security, this makes it hard for a hacker to decrypt your details. You are strongly recommended not to send full credit or debit card details in unencrypted electronic communications with us. We maintain physical, electronic and procedural safeguards in connection with the collection and disclosure of your information. Our security procedures mean that we may occasionally request proof of identity before we disclose personal information to you. You are responsible for protecting against unauthorised access to your password and to your computer.&nbsp;</div><div><br></div><div><br></div><div><strong>Data that we collect from you</strong></div><div>We may collect various information if you seek to place an order for a product to us on any of our Platforms.</div><div>We collect, process your data for processing your purchase on our Platforms and any possible later claims, and to provide you with our services. We may collect your title, name,&nbsp; email address, postal address, delivery address (if different), telephone number, mobile number, payment details, payment card details or bank account details.</div><div><br></div><div>Subject to obtaining your consent we may contact you by email with details of other products and services. If you prefer not to receive any marketing communications from us, you can opt out at any time.</div><div><br></div><div>We may pass your name, phone number and address on to a third party in order to make delivery of the product to you (for example to our courier or supplier).</div><div><br></div><div>Your phone number and email address may be used for notifications regarding order status and announcements of the latest deals and campaigns.</div><div><br></div><div><br></div><div><strong>Legitimate Purpose</strong></div><div>We may keep your information even after you have closed your account and are no longer availing our services to detect and prevent fraud, meet our legal/compliance/regulatory requirements, resolve any disputes and enforce our privacy policies and terms and conditions.</div><div><br></div><div><strong>Third Parties and Links</strong></div><div>We may share collected personally identifying information (including email addresses) with other companies in our group and for commercial purposes - such as advertising. We may also pass your details to our agents and subcontractors to help us with any of our uses of your data set out in our Privacy Policy. For example, we may use third parties to assist us with delivering products to you, to help us to collect payments from you, to analyse data, and to provide us with marketing or customer service assistance. We may exchange information with third parties for the purposes of fraud protection and credit risk reduction. We may transfer our databases containing your personal information if we sell our business or part of it.</div><div><br></div><div><strong>Customer Declaration of Consent</strong></div><div>I voluntarily and expressly consent to shineaurora's collection, use, sharing, processing and retention of my data in the manner set out here in above.</div>
                                        <h1>Return Policy</h1>
                                        <h3>What is the difference between returning something back to us and exchanging your product size?</h3><div>What’s the difference between a creating a return and a size exchange?</div><div><strong><br>Return:</strong></div><ul><li>You can return any product that you’re not happy with apart from those that fall under our no-return policy.</li><li>For products that you return back to us, you can&nbsp; a credit / debit card refund based on the mode of payment earlier in your order.</li></ul><div><br><br><strong>Exchange:</strong></div><ul><li>By creating an exchange, you can exchange any product you ordered, with another size of the same product (apart from those that fall under our no-exchange policy).</li><li>Incase of refund : k-net within 12 hours , if visa or master with 3-7 business days</li></ul><div><br></div><div><strong>Rules and Conditions for Exchanges:</strong><br>1. Exchange can only be made within 14 days from the date of delivery.<br>2. Item should be in a good condition and not used along with the original tag.<br>3. It should also be in the same brand box you received.</div><div><strong><em>4.Evening dresses , swimwear , lingerie and accessories are not returnable or exchangeable.</em></strong></div><div><strong>Unfortunately, it is our policy not to return some products. Therefore, we recommend that you read the product description carefully before purchasing it.</strong></div>
                                        <p id="last">
                                            As long as the website and the information and services on the website are provided free of charge, we will
                                            not be liable for any loss or damage of any nature.
                                        </p>
                                    </article>
                                    <div class="term-buttons-container">
                                        <button type="button" class="scroll-to-bottom">
                                            <svg
                                                    width="20"
                                                    height="11"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    title="Go to bottom to accept terms and conditions"
                                            >
                                                <title>Go to bottom to accept terms and conditions</title>
                                                <path
                                                        d="M20 1.39L18.594 0 9.987 8.261l-.918-.881.005.005L1.427.045 0 1.414 9.987 11 20 1.39"
                                                        fill="#fff"
                                                        fill-rule="evenodd"
                                                />
                                            </svg>
                                        </button>

                                            <button type="submit" class="accept-button" aria-hidden="true" aria-label="Accept terms and conditions"  data-id="{{ order.id }}" data-locale="{{ locale }}">
                                                Place order
                                            </button>

                                    </div>
                                </main>
                                    {{ form_end(payment_method_form) }}
                                <div class="p-t-10">
                                    <a href="{{ path('order', { locale: 'en' }) }}" onclick="setFormSubmitting();" class="hiraola-btn w-100">
                                        Back
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Hiraola's Checkout Area End Here -->

{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        // Create an instance of the Stripe object with your publishable API key
        // var stripe = Stripe("pk_test_51IU51mLg5TZnbiRrqWBt7NVQhhSsMbzK33P5nDrDkEZbMhZyO3NCThWs6mX7T5AxV8jSptmcd639iYqJYzUJBgWn00qv2gkIyj");
        var checkoutButton = document.getElementById("checkout-button");
        {#checkoutButton.addEventListener("click", function () {#}

        {#    alert($('.js-select2').select2('data'))#}
        {#    fetch("/{{ locale }}/order/create-session/{{ order.id }}", {#}
        {#      method: 'POST', // or 'PUT'#}
        {#      headers: {#}
        {#        'Content-Type': 'application/json',#}
        {#      },#}
        {#      body: JSON.stringify(data)#}
        {#    })#}
        {#        .then(function (response) {#}
        {#            return response.json();#}
        {#        })#}
        {#        .then(function (session) {#}
        {#            if(session.error === 'order'){#}
        {#                window.location.replace("/{{ locale }}/order/{{ order.id }}");#}
        {#            }else{#}
        {#                // return stripe.redirectToCheckout({ sessionId: session.id });#}
        {#            }#}
        {#        })#}
        {#        .then(function (result) {#}
        {#            // If redirectToCheckout fails due to a browser or network#}
        {#            // error, you should display the localized error message to your#}
        {#            // customer using error.message.#}
        {#            if (result.error) {#}
        {#                alert(result.error.message);#}
        {#            }#}
        {#        })#}
        {#        .catch(function (error) {#}
        {#            console.error("Error:", error);#}
        {#        });#}
        {#});#}
        var formSubmitting = false;
        var setFormSubmitting = function() { formSubmitting = true; };

        window.onload = function() {
            window.addEventListener("beforeunload", function (e) {
                if (formSubmitting) {
                    return undefined;
                }

                var confirmationMessage = 'It looks like you have been editing something. '
                    + 'If you leave before saving, your changes will be lost.';

                (e || window.event).returnValue = confirmationMessage; //Gecko + IE
                return confirmationMessage; //Gecko + Webkit, Safari, Chrome etc.
            });
        };
    </script>
    <script>

        // let getSiblings = function (e) {
        //     // for collecting siblings
        //     let siblings = [];
        //     // if no parent, return no sibling
        //     if(!e.parentNode) {
        //         return siblings;
        //     }
        //     // first child of the parent node
        //     let sibling  = e.parentNode.firstChild;
        //     // collecting siblings
        //     while (sibling) {
        //         if (sibling.nodeType === 1 && sibling !== e) {
        //             siblings.push(sibling);
        //         }
        //         sibling = sibling.nextSibling;
        //     }
        //     return siblings;
        // };
    </script>
    <style>
        .card-body .payment-type .types {
            margin: 25px 0;
        }
        .flex.justify-space-between {
            justify-content: space-between;
        }
        .flex {
            display: flex;
            flex-direction: row wrap;
            align-items: center;
        }
        .payment-type .types .type.selected {
            border-color: #d5b473;
            background: rgba(64,179,255,0.1);
        }

        .payment-type {
           margin-bottom: 20px;
        }

        .payment-type .types .type {
            width: 45%;
            position: relative;
            background: #f2f4f7;
            border: 2px solid #e8ebed;
            padding: 25px;
            box-sizing: border-box;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.5s ease;

        }
        .payment-type .types .type.disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .payment-type .types .type.selected .logo {
            color: #d5b473;
        }

        .payment-type .types .type .logo {
            font-size: 48px;
            color: #8a959c;
            justify-content: center;
        }
        .payment-type .types .type .logo, .card .card-body .payment-type .types .type p {
            transition: all 0.5s ease;
        }
        .payment-type .types .type.selected p {
            color: #28333b;
        }
        .payment-type .types .type p {
            margin-bottom: 0;
            font-size: 10px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            color: #8a959c;
        }
        .payment-type .types .type .logo, .card .card-body .payment-type .types .type p {
            transition: all 0.5s ease;
        }
        .payment-type .types .type.selected::after {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            height: 40px;
            width: 40px;
            top: -21px;
            right: -21px;
            background: #fff;
            border: 2px solid #d5b473;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /*.select-wrapper {*/
        /*    position: relative;*/
        /*    width: 100%;*/
        /*}*/
        /*.select-wrapper::after {*/
        /*    color: black;*/
        /*    content: "▾";*/
        /*    margin-right: 10px;*/
        /*    pointer-events: none;*/
        /*    position: absolute;*/
        /*    right: 10px;*/
        /*    top: 7px;*/
        /*    font-size: 20px;*/
        /*}*/

        /*.select {*/
        /*    -moz-appearance: none;*/
        /*    -webkit-appearance: none;*/
        /*    background: white;*/
        /*    border: none;*/
        /*    border-radius: 0;*/
        /*    cursor: pointer;*/
        /*    padding: 12px;*/
        /*    width: 100%;*/
        /*    font-size: 18px;*/
        /*}*/
        /*.select:focus {*/
        /*    color: black;*/
        /*}*/
        /*.select::-ms-expand {*/
        /*    display: none;*/
        /*}*/
    </style>
    <style>
        :root {
            --clr-light: #f5f5f5;
            --clr-white: #fff;
            --clr-dark-blue: #293a80;
        }
        main {
            display: block;
        }

        button {
            display: inline-block;
            border: none;
            font-family: inherit;
            margin: 0;
            line-height: 1.15;
            overflow: visible;
            text-transform: none;
            -webkit-appearance: button;
            cursor: pointer;
            text-align: center;
        }

        button::-moz-focus-inner {
            border-style: none;
            padding: 0;
        }

        button:-moz-focusring {
            outline: 2px dotted ButtonText;
        }

        :focus {
            --clr-orange: #f39422;
            outline: 2px dotted var(--clr-orange);
        }


        main {
            padding: 3vh 1rem 0;
            display: grid;
            grid-template: 0.5fr 65px/2fr minmax(200px, 800px) 2fr;
            align-content: center;
        }

        .terms-and-conditions {
            grid-column: 2/3;
            grid-row: 1;
            height: 30vh;
            margin: 0 auto;
            max-width: 800px;
            padding: 2em;
            overflow-y: scroll;
            border-radius: 5px 5px 0px 0px;
            background-color: var(--clr-white);
        }
        .terms-and-conditions::-webkit-scrollbar-track {
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            background-color: var(--clr-light);
        }
        .terms-and-conditions::-webkit-scrollbar {
            width: 15px;
            background-color: var(--clr-light);
        }
        .terms-and-conditions::-webkit-scrollbar-thumb {
            background-color: var(--clr-dark-blue);
        }
        .terms-and-conditions h1 {
            font-size: calc(1.7rem + 0.25vw);
            line-height: 1.1;
        }
        .terms-and-conditions h2 {
            font-size: calc(1.2rem + 0.25vw);
            font-weight: normal;
        }
        .terms-and-conditions h3 {
            font-size: calc(1.1rem + 0.25vw);
            font-weight: normal;
        }
        .terms-and-conditions p {
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .terms-and-conditions ul li {
            margin-bottom: 0.5rem;
            padding-left: 0.25rem;
            line-height: 1.5;
        }
        .terms-and-conditions ul li::marker {
            font-size: 1em;
            color: #6c63ff;
            font-family: sans-serif;
        }

        .term-buttons-container {
            grid-row: 2;
            grid-column: 2/3;
            display: flex;
            flex-direction: column;
            margin-top: -2px;
            padding: 0.7em;
            z-index: 1;
            border-top: 1px solid #f3f3f3;
            background-color: #fdfdfd;
            border-radius: 0 0 5px 5px;
        }

        .scroll-to-bottom {
            justify-self: start;
            align-self: center;
            margin-top: -23px;
            padding: 0.5em;
            font-size: 1rem;
            border-radius: 50%;
            background-color: rgba(83, 127, 198, 0.7);
            box-shadow: 0px 10px 15px -6px rgba(0, 0, 0, 0.2);
        }
        .scroll-to-bottom:hover {
            background: #537fc6;
        }
        .scroll-to-bottom[aria-hidden=true] {
            display: none;
        }

        [name=terms-and-conditions-form] {
            justify-self: flex-end;
            align-self: flex-end;
        }

        .accept-button {
            background-color: #537ec5;
            padding: 0.7em 1.5em;
            font-size: 0.95rem;
            color: var(--clr-white);
            border-radius: 5px;
            box-shadow: 0px 10px 15px -6px rgba(0, 0, 0, 0.2);
        }
        .accept-button:hover {
            background: var(--clr-dark-blue);
        }
        .accept-button[aria-hidden=true] {
            display: none;
        }
    </style>
    <script>
        const terms = document.querySelector(".terms-and-conditions");
        const termsLastElement = terms.lastElementChild;
        const scrollToBottom = document.querySelector(".scroll-to-bottom");
        const acceptButton = document.querySelector(".accept-button");

        scrollToBottom.addEventListener("click", function(e) {
            termsLastElement.scrollIntoView({
                block: "start",
                behavior: "smooth",
                inline: "nearest"
            });
        });

        function obCallback(payload) {
            if (payload[0].isIntersecting) {
                scrollToBottom.setAttribute("aria-hidden", true);
                acceptButton.setAttribute("aria-hidden", false);
                observer.unobserve(termsLastElement);
            }
        }

        const observer = new IntersectionObserver(obCallback, { root: terms, threshold: 0.1 });

        observer.observe(termsLastElement);
    </script>

{% endblock %}